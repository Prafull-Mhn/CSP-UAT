import{c as r}from"./chunk-V75HA52R.js";import"./chunk-DVQV3FQL.js";import"./chunk-PFX33BFR.js";import{a as M}from"./chunk-ZQ2XWVHY.js";import{c as P,i as q}from"./chunk-KUD4YI4G.js";import{N as w}from"./chunk-252WWBJT.js";import"./chunk-CARY4E7O.js";import"./chunk-MALLL7IS.js";import{a as x}from"./chunk-W6GOLFIX.js";import{Ab as s,Bb as l,Ca as h,Cb as A,Da as f,Gb as C,Jb as m,Lb as c,Nc as _,Ub as b,Xa as p,Ya as u,a as T,bc as v,cd as S,dc as y,nb as E,pb as o,ta as k,vb as N}from"./chunk-CNCEPOKB.js";var B=i=>({"ti-btn-primary":i});function D(i,g){if(i&1&&A(0,"app-data-grid",7),i&2){let a=c();o("tableDataSet",a.aepsHistory)("tableConfig",a.tableConfig)("tableWidth",100)("formName","AEPS History")}}function R(i,g){if(i&1){let a=C();s(0,"app-dynamic-form",8),m("action",function(t){h(a);let n=c();return f(n.applyActionOn(t,1))}),l()}if(i&2){let a=c();o("formConfig",a.formConfig)("formName","Balance Enquiry")("columnCount",4)}}function F(i,g){if(i&1){let a=C();s(0,"app-dynamic-form",8),m("action",function(t){h(a);let n=c();return f(n.applyActionOn(t,2))}),l()}if(i&2){let a=c();o("formConfig",a.cashWithdrawalFormConfig)("formName","Cash Withdrawal")("columnCount",4)}}function W(i,g){if(i&1){let a=C();s(0,"app-dynamic-form",8),m("action",function(t){h(a);let n=c();return f(n.applyActionOn(t,3))}),l()}if(i&2){let a=c();o("formConfig",a.formConfig)("formName","Mini Statements")("columnCount",4)}}var z=(()=>{class i{applyActionOn(a,e){let t=a.form;switch(t.ipaddress=this.ip,t.accessmodetype="site",t.is_iris="No",t.submerchantid="1",t.pipe="Bank1",t.data=this.data,e){case 1:this.balanceEnquiry(t);break;case 2:this.cashWithdrawal(t);break;case 3:this.miniStatements(t);break}}getIP(){this.http.get("http://ip-api.com/json").subscribe(a=>{this.ip=a.query})}balanceEnquiry(a){a.transactiontype="BE",this.apiService.getAEPSEnquiry(a).subscribe({next:e=>{if(e.status){let t={ackno:e.ackno,amount:e.amount,balanceamount:e.balanceamount,bankrrn:e.bankrrn,clientrefno:e.clientrefno};this.dialog.open(r,{data:{type:"aepsResult",title:"Balance Enquiry Result",status:e.status,message:e.message,result:t,printData:T({type:"BalanceEnquiry"},t)}})}else this.dialog.open(r,{data:{type:"aepsResult",title:"Balance Enquiry Failed",status:e.status,message:e.message,result:{}}})},error:e=>{this.dialog.open(r,{data:{type:"aepsResult",title:"Balance Enquiry Error",status:!1,message:"Unable to do enquiry",result:{}}}),console.error("Error fetching data:",e)}})}miniStatements(a){a.transactiontype="MS",this.apiService.getAEPSMiniStatement(a).subscribe({next:e=>{if(e.status){let t={ackno:e.ackno,datetime:e.datetime,balanceamount:e.balanceamount,bankrrn:e.bankrrn,bankiin:e.bankiin},n=[{header:"Date",field:"date"},{header:"Type",field:"txnType"},{header:"Amount",field:"amount"},{header:"Narration",field:"narration"}];this.dialog.open(r,{data:{type:"dataGrid",title:"Mini Statement",status:e.status,message:e.message,summary:t,columns:n,rows:e.ministatement||[],gridTitle:"Mini Statement"}})}else this.dialog.open(r,{data:{type:"dataGrid",title:"Mini Statement Failed",status:e.status,message:e.message,columns:[],rows:e.ministatement||[],summary:{},gridTitle:"Mini Statement",printData:{type:"MiniStatement",summary:{},ministatement:e.ministatement||[]}}})},error:e=>{this.dialog.open(r,{data:{type:"dataGrid",title:"Mini Statement Error",status:!1,message:"Unable to Generate Mini Statement",columns:[],rows:[],summary:{},gridTitle:"Mini Statement"}}),console.error("Error fetching data:",e)}})}cashWithdrawal(a){a.transactiontype="CW",this.apiService.getAEPSCashWithdrawal(a).subscribe({next:e=>{if(e.status){let t={status:e.status,message:e.message,ackno:e.ackno,amount:e.amount,bankrrn:e.bankrrn};this.dialog.open(r,{data:{type:"aepsResult",title:"Cash Withdrawal Result",status:e.status,message:e.message,result:t,printData:T({type:"CashWithdrawal"},t)}})}else this.dialog.open(r,{data:{type:"aepsResult",title:"Cash Withdrawal Failed",status:e.status,message:e.message,result:{}}})},error:e=>{this.dialog.open(r,{data:{type:"aepsResult",title:"Cash Withdrawal Error",status:!1,message:"Unable to Process the Request",result:{}}}),console.error("Error fetching data:",e)}})}constructor(a,e,t,n){this.dialog=a,this.apiService=e,this.messageNotificationService=t,this.http=n,this.aepsHistory=[{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335031",AadharNumber:"429000824055",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335032",AadharNumber:"429000824056",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335033",AadharNumber:"429000824057",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335034",AadharNumber:"429000824058",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335035",AadharNumber:"429000824059",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335036",AadharNumber:"429000824060",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335037",AadharNumber:"429000824061",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335038",AadharNumber:"429000824062",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335039",AadharNumber:"429000824063",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335040",AadharNumber:"429000824064",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335041",AadharNumber:"429000824065",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335042",AadharNumber:"429000824066",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335043",AadharNumber:"429000824067",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335044",AadharNumber:"429000824068",BankName:"Airtel Payment Bank",Biometrics:"Captured"},{TxnType:"Balance Enquiry",DeviceType:"Morpho",MobileNumber:"8700335045",AadharNumber:"429000824069",BankName:"Airtel Payment Bank",Biometrics:"Captured"}],this.tableConfig={tableHeading:"Service Details",columns:[{name:"Txn Type",field:"TxnType",width:"150"},{name:"Device Type",field:"DeviceType",width:"150"},{name:"Mobile Number",field:"MobileNumber",width:"300"},{name:"Aadhar Number",field:"AadharNumber",width:"100"},{name:"Bank Name",field:"BankName",width:"150"},{name:"Biometrics",field:"Biometrics",width:"200"}],config:{sorting:{column:"MobileNumber",order:"desc"},pageSizeOptions:[5,10],pageSize:10},isRowClickable:!1,isSearchable:!0},this.formConfig={fields:[{type:"dropdown",id:"DeviceType",label:"Device Type",options:[{value:"morpho",label:"Morpho"},{value:"mantra",label:"Mantra"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",label:"Aadhar Number",placeholder:"Enter Aadhar Number",class:"form-control",id:"adhaarnumber",validators:[{isRequired:!0}]},{type:"text",label:"Mobile Number",placeholder:"Enter Mobile Number",class:"form-control",id:"mobilenumber",validators:[{isRequired:!0}]},{type:"dropdown",id:"nationalBankIdentification",label:"Bank Name",options:[],class:"form-control",validators:[{isRequired:!0}]},{type:"textarea",label:"Remarks",placeholder:"Enter Remarks",class:"form-control",id:"requestremarks",validators:[{isRequired:!1}]},{type:"fingrePrint",label:"Biometrics",placeholder:"Enter Biometrics",class:"form-control",id:"data",validators:[{isRequired:!1}]}],isFromPopUP:!1,actions:[],formHeight:350},this.cashWithdrawalFormConfig={fields:[{type:"dropdown",id:"DeviceType",label:"Device Type",options:[{value:"morpho",label:"Morpho"},{value:"mantra",label:"Mantra"}],class:"form-control",validators:[{isRequired:!0}]},{type:"text",label:"Aadhar Number",placeholder:"Enter Aadhar Number",class:"form-control",id:"adhaarnumber",validators:[{isRequired:!0}]},{type:"text",label:"Amount",placeholder:"Enter Amount",class:"form-control",id:"amount",validators:[{isRequired:!0}]},{type:"text",label:"Mobile Number",placeholder:"Enter Mobile Number",class:"form-control",id:"mobilenumber",validators:[{isRequired:!0}]},{type:"dropdown",id:"nationalBankIdentification",label:"Bank Name",options:[],class:"form-control",validators:[{isRequired:!0}]},{type:"textarea",label:"Remarks",placeholder:"Enter Remarks",class:"form-control",id:"requestremarks",validators:[{isRequired:!1}]},{type:"fingrePrint",label:"Biometrics",placeholder:"Enter Biometrics",class:"form-control",id:"data",validators:[{isRequired:!1}]},{type:"terms",label:[{isRequired:!1,id:"t1",value:"I/Customer hereby accepts and confirm all the terms & conditions under best of my knowledge."},{isRequired:!1,id:"t2",value:"I/Retailer hereby accepts and confirm all the terms & conditions under best of my knowledge."}],note:["You're not allowed to do more than 5 transactions of each transaction mode for same Aadhar."],placeholder:"",class:"form-check-input",id:"t1",validators:[{isRequired:!1}]}],isFromPopUP:!1,actions:[{name:"",css:""},{name:"",css:""}],formHeight:350},this.data='<?xml version="1.0" encoding="UTF-8"?><Pid ts="2025-06-10T12:34:56" ver="1.0"><Bios><Bio type="FMR" posh="LEFT_INDEX">ZHVtbXlGaW5nZXJQcmludERhdGE=</Bio></Bios><DeviceInfo dpId="MANTRA123" rdsId="MANTRA" rdsVer="2.0" dc="MANTRA:MFS100" mi="MFS100" mc="abcdef1234567890"/><Resp errCode="0" errInfo="SUCCESS" fCount="1" fType="0" iCount="0" pCount="0" nmPoints="0"/><CustOpts><Param name="udc" value="DEVICE1234567890"/></CustOpts><Skey ci="20250610">VGhpcyBpcyBhIHNlc3Npb24ga2V5</Skey><Hmac>U2FtcGxlIEhtYWMgVmFsdWU=</Hmac></Pid>',this.selectedTab="APES History",this.ip="",this.getAEPSBankList(),this.getIP()}getAEPSBankList(){this.apiService.getAEPSBankList({}).subscribe({next:a=>{if(a.status&&a.banklist?.data){let e=a.banklist.data.map(d=>({value:d.iinno,label:d.bankName})),t=this.formConfig.fields.find(d=>d.id==="nationalBankIdentification");t&&(t.options=e);let n=this.cashWithdrawalFormConfig.fields.find(d=>d.id==="nationalBankIdentification");n&&(n.options=e)}}})}static{this.\u0275fac=function(e){return new(e||i)(u(P),u(M),u(x),u(S))}}static{this.\u0275cmp=k({type:i,selectors:[["app-aeps"]],standalone:!0,features:[v],decls:18,vars:13,consts:[[1,"grid","grid-cols-12","gap-6"],[1,"xl:col-span-12","col-span-12"],[1,"box","box-body","!p-0"],[1,"md:flex","px-4","py-6","items-center","justify-between"],[1,"mt-2","md:mt-0"],[1,"-mb-0.5","sm:flex","sm:space-x-6","rtl:space-x-reverse","flex-wrap"],[1,"w-full","flex","sm:w-auto","hs-tab-active:font-semibold","hs-tab-active:text-primary","hs-tab-active:bg-primary/10","rounded-md","py-2","px-3","text-sm","cursor-pointer",3,"click","ngClass"],[3,"tableDataSet","tableConfig","tableWidth","formName"],[3,"action","formConfig","formName","columnCount"]],template:function(e,t){e&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"nav",5)(6,"a",6),m("click",function(){return t.selectedTab="APES History"}),b(7," APES History "),l(),s(8,"a",6),m("click",function(){return t.selectedTab="Balance Enquiry"}),b(9," Balance Enquiry "),l(),s(10,"a",6),m("click",function(){return t.selectedTab="Cash Withdrawal"}),b(11," Cash Withdrawal "),l(),s(12,"a",6),m("click",function(){return t.selectedTab="Mini Statements"}),b(13," Mini Statements "),l()()()()(),E(14,D,1,4,"app-data-grid",7)(15,R,1,3)(16,F,1,3)(17,W,1,3),l()()),e&2&&(p(6),o("ngClass",y(5,B,t.selectedTab==="APES History")),p(2),o("ngClass",y(7,B,t.selectedTab==="Balance Enquiry")),p(2),o("ngClass",y(9,B,t.selectedTab==="Cash Withdrawal")),p(2),o("ngClass",y(11,B,t.selectedTab==="Mini Statements")),p(2),N(14,t.selectedTab==="APES History"?14:t.selectedTab==="Balance Enquiry"?15:t.selectedTab==="Cash Withdrawal"?16:t.selectedTab==="Mini Statements"?17:-1))},dependencies:[q,w,_]})}}return i})();export{z as AEPSComponent};
